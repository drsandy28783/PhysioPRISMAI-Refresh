{% extends "base.html" %}
{% block title %}Forgot Password â€“ Physiologic PRISM{% endblock %}

{% block head %}
<style>
  /* Hide navbar on forgot password page */
  body > .navbar { display: none !important; }
  .container { max-width: 400px; margin: 80px auto; }
  .info-box {
    padding: 16px;
    margin-bottom: 24px;
    background-color: #e3f2fd;
    border-left: 4px solid #2196F3;
    border-radius: 4px;
  }
  .info-box p {
    margin: 0;
    color: #1976D2;
    font-size: 0.95em;
    line-height: 1.5;
  }
</style>
{% endblock %}

{% block content %}
  <div class="container">
    <h2>Forgot Password</h2>
    <p style="color: #666; margin-bottom: 24px;">
      Enter your email address and we'll send you instructions to reset your password.
    </p>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div style="padding: 12px; margin-bottom: 16px; border-radius: 4px;
                      background-color: {{ '#d4edda' if category == 'success' else '#f8d7da' }};
                      border: 1px solid {{ '#c3e6cb' if category == 'success' else '#f5c6cb' }};
                      color: {{ '#155724' if category == 'success' else '#721c24' }};">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="info-box">
      <p>
        <strong>Note:</strong> For security reasons, we'll send reset instructions
        only if an account exists with the provided email address.
        The reset link will be valid for 30 minutes.
      </p>
    </div>

    <form method="POST" action="{{ url_for('forgot_password_page') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="field-block">
        <input class="input-field" type="email" name="email"
               placeholder="Enter your email address" required>
      </div>

      <div style="margin-top: 24px; display: flex; gap: 12px;">
        <button type="submit" class="button">Send Reset Link</button>
        <a href="{{ url_for('login') }}" class="button" style="background: #ccc; color: #000;">Back to Login</a>
      </div>

      <p style="margin-top: 16px; text-align: center; color: #666; font-size: 0.9em;">
        Remember your password? <a href="{{ url_for('login') }}">Login here</a>
      </p>
    </form>

    <div style="margin-top: 32px; padding: 16px; background-color: #f9f9f9; border-radius: 4px;">
      <p style="margin: 0; color: #666; font-size: 0.9em; line-height: 1.6;">
        <strong>Having trouble?</strong><br>
        If you don't receive an email within a few minutes, please check your spam folder.
        If you still need help, contact support at
        <a href="mailto:support@physiologicprism.com">support@physiologicprism.com</a>
      </p>
    </div>
  </div>
{% endblock %}
